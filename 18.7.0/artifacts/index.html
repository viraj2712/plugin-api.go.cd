<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name ="description" content="Extend GoCD's functionality. Implement GoCD plugins for SCMs, tasks, notifications, authentication, package repositories, elastic agents and authorization." />
    <meta name ="keywords" content="gocd plugins, plugins for gocd, extension points, open source gocd, open source continuous delivery" />
    <link href="../images/gocd.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="../images/gocd.png" rel="apple-touch-icon" type="image/png" size="192x192" />
    <title>GoCD Artifact Store Plugin API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="../stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" media="print" />

      <script src="../javascripts/all.js"></script>


      <script>
        $(function() {
          setupLanguages([]);
        });
      </script>
  </head>

  <body class="artifacts artifacts_index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="../images/logo.png" alt="Logo" />
        <div class="lang-selector">
        </div>
      <div class="version-switcher">
        <span class="version-label">Switch version:</span>
        <select class="version"></select>
      </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/gocd/plugin-api.go.cd'>Edit this guide on GitHub</a></li>
            <li><a href='https://api.gocd.org'>GoCD API Documentation</a></li>
            <li><a href='https://docs.gocd.org'>GoCD User Documentation</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="artifact-plugins">Artifact Plugins</h1>

<h2 id="current-version">Current Version</h2>

<p>This document is for version 1.0 (the latest) of the artifacts endpoint.</p>

<h2 id="background">Background</h2>

<p>By default, GoCD internally manages and stores artifacts. The Artifact extension allows GoCD to make use of an external artifact store for storing artifacts while retaining traceability between pipelines. For example, by using the <a href="https://github.com/gocd/docker-registry-artifact-plugin">Docker artifact registry</a> plugin, a user can publish an image to a docker registry, and subsequently fetch it in a downstream pipeline. Since GoCD is &ldquo;aware&rdquo; of the artifact store with this extension, it can still maintain the Value Stream between the upstream and downstream pipelines even if the artifact is stored outside of GoCD.</p>

<p>Developers can start building their own elastic-agent plugins by forking the
<a href="https://github.com/gocd/docker-registry-artifact-plugin">docker plugin</a> as an example reference implementation.</p>

<h2 id="how-will-it-help-you">How will it help you?</h2>

<p>A feature like this will allow for artifacts to be uploaded and stored outside of GoCD. Previously, the artifacts were only managed on the GoCD server.</p>

<h1 id="requests-from-the-gocd-server">Requests from the GoCD server</h1>

<p>In order to implement an artifact extension point the following messages must be implemented by the plugin.</p>

<ul>
<li><a href="#publish-artifact">Publish Artifact</a></li>
<li><a href="#fetch-artifact">Fetch Artifact</a></li>
<li><a href="#get-plugin-capabilities">Capabilities</a></li>
</ul>

<p>These are general purpose messages that a plugin must implement to allow users to configure the plugin through the browser.</p>

<ul>
<li><a href="#get-plugin-icon">Get Plugin Icon</a></li>
</ul>

<p>These are messages that a plugin must implement in order to allow users to configure artifact stores through the browser.</p>

<ul>
<li><a href="#get-store-config-metadata">Get Store Config Metadata</a></li>
<li><a href="#get-store-config-view">Get Store Config View</a></li>
<li><a href="#validate-store-config">Validate Store Config</a></li>
</ul>

<p>These are messages that a plugin must implement in order to allow users to configure publishing an artifact through the browser.</p>

<ul>
<li><a href="#get-publish-artifact-metadata">Get Publish Artifact Metadata</a></li>
<li><a href="#get-publish-artifact-view">Get Publish Artifact View</a></li>
<li><a href="#validate-publish-artifact-config">Validate Publish Artifact Configuration</a></li>
</ul>

<p>These are messages that a plugin must implement in order to allow users to configure fetching an artifact through the browser.</p>

<ul>
<li><a href="#get-fetch-artifact-metadata">Get Fetch Artifact Metadata</a></li>
<li><a href="#get-fetch-artifact-view">Get Fetch Artifact View</a></li>
<li><a href="#validate-fetch-artifact-config">Validate Fetch Artifact Configuration</a> </li>
</ul>

<h2 id="publish-artifact">Publish Artifact</h2>

<p>This message is a request to the plugin to publish an artifact to the specified artifact store.</p>

<p class='request-name-heading'>Request name</p>

<p><code class="prettyprint">cd.go.artifact.publish-artifact</code></p>

<p class='request-body-heading'>Request body</p>

<blockquote>
<p>Given the following config XML snippet —</p>
</blockquote>

<pre class="highlight xml"><code>
<span class="nt">&lt;artifactStores&gt;</span>
      <span class="nt">&lt;artifactStore</span> <span class="na">id=</span><span class="s">"dockerhub"</span> <span class="na">pluginId=</span><span class="s">"cd.go.artifact.docker.registry"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property&gt;</span>
          <span class="nt">&lt;key&gt;</span>RegistryURL<span class="nt">&lt;/key&gt;</span>
          <span class="nt">&lt;value&gt;</span>https://index.docker.io/v1/<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;property&gt;</span>
          <span class="nt">&lt;key&gt;</span>Username<span class="nt">&lt;/key&gt;</span>
          <span class="nt">&lt;value&gt;</span>boohoo<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;property&gt;</span>
          <span class="nt">&lt;key&gt;</span>Password<span class="nt">&lt;/key&gt;</span>
          <span class="nt">&lt;value&gt;</span>password<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
      <span class="nt">&lt;/artifactStore&gt;</span>
    <span class="nt">&lt;/artifactStores&gt;</span>
<span class="nt">&lt;pipelines</span> <span class="na">group=</span><span class="s">"first"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;pipeline</span> <span class="na">name=</span><span class="s">"build"</span><span class="nt">&gt;</span>
    ...
    <span class="nt">&lt;job</span> <span class="na">name=</span><span class="s">"build-job"</span><span class="nt">&gt;</span>
      ...
      <span class="nt">&lt;artifacts&gt;</span>
        <span class="nt">&lt;artifact</span> <span class="na">id=</span><span class="s">"app-image"</span> <span class="na">storeId=</span><span class="s">"dockerhub"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;configuration&gt;</span>
            <span class="nt">&lt;property&gt;</span>
              <span class="nt">&lt;key&gt;</span>Image<span class="nt">&lt;/key&gt;</span>
              <span class="nt">&lt;value&gt;</span>gocd/gocd-demo<span class="nt">&lt;/value&gt;</span>
            <span class="nt">&lt;/property&gt;</span>
            <span class="nt">&lt;property&gt;</span>
              <span class="nt">&lt;key&gt;</span>Tag<span class="nt">&lt;/key&gt;</span>
              <span class="nt">&lt;value&gt;</span>v${GO_PIPELINE_COUNTER}<span class="nt">&lt;/value&gt;</span>
            <span class="nt">&lt;/property&gt;</span>
          <span class="nt">&lt;/configuration&gt;</span>
        <span class="nt">&lt;/artifact&gt;</span>
      <span class="nt">&lt;/artifacts&gt;</span>
    <span class="nt">&lt;/job&gt;</span>
    ...
  <span class="nt">&lt;/pipeline&gt;</span>
<span class="nt">&lt;/pipelines&gt;</span>
</code></pre>

<blockquote>
<p>The plugin will receive the following JSON body —</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"environment_variables"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"GO_PIPELINE_NAME"</span><span class="p">:</span><span class="s2">"build"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"GO_TRIGGER_USER"</span><span class="p">:</span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"FOO"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"artifact_plan"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"configuration"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"BuildFile"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nt">"Image"</span><span class="p">:</span><span class="s2">"gocd/gocd-demo"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"Tag"</span><span class="p">:</span><span class="s2">"v${GO_PIPELINE_COUNTER}"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"app-image"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"storeId"</span><span class="p">:</span><span class="s2">"dockerhub"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"artifact_store"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"configuration"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"RegistryURL"</span><span class="p">:</span><span class="s2">"https://index.docker.io/v1/"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"Username"</span><span class="p">:</span><span class="s2">"boohoo"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"Password"</span><span class="p">:</span><span class="s2">"password"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"dockerhub"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"agent_working_directory"</span><span class="p">:</span><span class="s2">"/Users/varshavs/gocd/agent/pipelines/build"</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The request body will contain the following JSON elements:</p>

<p class='attributes-table-follows'></p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">environment_variables</code></td>
<td><code class="prettyprint">Object</code></td>
<td>A map of the environment variable that were available at the time the job was triggered.</td>
</tr>
<tr>
<td><code class="prettyprint">artifact_plan</code></td>
<td><code class="prettyprint">Object</code></td>
<td>This mainly contains the configuration properties that inform the plugin about the specific artifact that needs to be pushed.</td>
</tr>
<tr>
<td><code class="prettyprint">artifact_store</code></td>
<td><code class="prettyprint">Object</code></td>
<td>This section contains the details about the artifact store to which the plugin has to publish the artifact.</td>
</tr>
<tr>
<td><code class="prettyprint">agent_working_directory</code></td>
<td><code class="prettyprint">String</code></td>
<td>Since the artifact publishing happens on the go-agent side, the working directory is also passed along in the request in case the plugin wants to use it.</td>
</tr>
</tbody></table>

<p class='response-code-heading'>Response code</p>

<p>The plugin is expected to return status <code class="prettyprint">200</code> if it can understand the request.</p>

<p class='response-body-heading'>Response Body</p>

<p>The plugin is expected to return a json as shown. This json is written into a file called <code class="prettyprint">&lt;plugin-id&gt;.json</code> on the agent and uploaded as a <code class="prettyprint">Build Artifact</code> to the GoCD server to a directory called <code class="prettyprint">pluggable_metadata_folder</code></p>

<blockquote>
<p>Plugin response body</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"metadata"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"image"</span><span class="p">:</span><span class="s2">"gocd/gocd-demo:v23"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"digest"</span><span class="p">:</span><span class="s2">"sha256:f7840887b6f09f531935329a4ad1f6176866675873a8b3eed6a5894573da8247"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>The content of plugin-id.json file</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"app-image"</span><span class="p">:{</span><span class="w">
  </span><span class="nt">"image"</span><span class="p">:</span><span class="s2">"gocd/gocd-demo:v23"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"digest"</span><span class="p">:</span><span class="s2">"sha256:f7840887b6f09f531935329a4ad1f6176866675873a8b3eed6a5894573da8247"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p><em>Note: <code class="prettyprint">app-image</code> is the artifact id specified in the job configuration</em></p>
</blockquote>

<h2 id="fetch-artifact">Fetch Artifact</h2>

<p>This message is a request to the plugin to fetch an artifact from the specified artifact store.</p>

<p class='request-name-heading'>Request name</p>

<p><code class="prettyprint">cd.go.artifact.fetch-artifact</code></p>

<p class='request-body-heading'>Request body</p>

<blockquote>
<p>Given the following config XML snippet —</p>
</blockquote>

<pre class="highlight xml"><code>
<span class="nt">&lt;artifactStores&gt;</span>
      <span class="nt">&lt;artifactStore</span> <span class="na">id=</span><span class="s">"dockerhub"</span> <span class="na">pluginId=</span><span class="s">"cd.go.artifact.docker.registry"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property&gt;</span>
          <span class="nt">&lt;key&gt;</span>RegistryURL<span class="nt">&lt;/key&gt;</span>
          <span class="nt">&lt;value&gt;</span>https://index.docker.io/v1/<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;property&gt;</span>
          <span class="nt">&lt;key&gt;</span>Username<span class="nt">&lt;/key&gt;</span>
          <span class="nt">&lt;value&gt;</span>boohoo<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;property&gt;</span>
          <span class="nt">&lt;key&gt;</span>Password<span class="nt">&lt;/key&gt;</span>
          <span class="nt">&lt;value&gt;</span>password<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
      <span class="nt">&lt;/artifactStore&gt;</span>
    <span class="nt">&lt;/artifactStores&gt;</span>
<span class="nt">&lt;pipelines</span> <span class="na">group=</span><span class="s">"first"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;pipeline</span> <span class="na">name=</span><span class="s">"build"</span><span class="nt">&gt;</span>
    ...
    <span class="nt">&lt;job</span> <span class="na">name=</span><span class="s">"build-job"</span><span class="nt">&gt;</span>
      ...
      <span class="nt">&lt;artifacts&gt;</span>
        <span class="nt">&lt;artifact</span> <span class="na">type=</span><span class="s">"external"</span> <span class="na">id=</span><span class="s">"app-image"</span> <span class="na">storeId=</span><span class="s">"dockerhub"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;configuration&gt;</span>
            <span class="nt">&lt;property&gt;</span>
              <span class="nt">&lt;key&gt;</span>Image<span class="nt">&lt;/key&gt;</span>
              <span class="nt">&lt;value&gt;</span>gocd/gocd-demo<span class="nt">&lt;/value&gt;</span>
            <span class="nt">&lt;/property&gt;</span>
            <span class="nt">&lt;property&gt;</span>
              <span class="nt">&lt;key&gt;</span>Tag<span class="nt">&lt;/key&gt;</span>
              <span class="nt">&lt;value&gt;</span>v${GO_PIPELINE_COUNTER}<span class="nt">&lt;/value&gt;</span>
            <span class="nt">&lt;/property&gt;</span>
          <span class="nt">&lt;/configuration&gt;</span>
        <span class="nt">&lt;/artifact&gt;</span>
      <span class="nt">&lt;/artifacts&gt;</span>
    <span class="nt">&lt;/job&gt;</span>
    ...

    <span class="nt">&lt;stage</span> <span class="na">name=</span><span class="s">"downstream_stage"</span><span class="nt">&gt;</span>
      ...
      <span class="nt">&lt;job</span> <span class="na">name=</span><span class="s">"downstream_job"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;tasks&gt;</span>
            <span class="nt">&lt;fetchartifact</span> <span class="na">artifactOrigin=</span><span class="s">"external"</span> <span class="na">stage=</span><span class="s">"upstream_stage"</span> <span class="na">job=</span><span class="s">"build-job"</span> <span class="na">artifactId=</span><span class="s">"app-image"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;configuration&gt;</span>
                <span class="nt">&lt;property&gt;</span>
                  <span class="nt">&lt;key&gt;</span>image_name<span class="nt">&lt;/key&gt;</span>
                  <span class="nt">&lt;value&gt;</span>release-candidate<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/property&gt;</span>
              <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/fetchartifact&gt;</span>
        <span class="nt">&lt;/tasks&gt;</span>
      <span class="nt">&lt;/job&gt;</span>
      ...
    <span class="nt">&lt;/stage&gt;</span>
  <span class="nt">&lt;/pipeline&gt;</span>
<span class="nt">&lt;/pipelines&gt;</span>
</code></pre>

<blockquote>
<p>The plugin will receive the following JSON body —</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"fetch_artifact_configuration"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"image_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"release-candidate"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"artifact_metadata"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"image"</span><span class="p">:</span><span class="s2">"gocd/gocd-demo:v23"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"digest"</span><span class="p">:</span><span class="s2">"sha256:f7840887b6f09f531935329a4ad1f6176866675873a8b3eed6a5894573da8247"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"store_configuration"</span><span class="p">:{</span><span class="w">
    </span><span class="nt">"RegistryURL"</span><span class="p">:</span><span class="s2">"https://index.docker.io/v1/"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"Username"</span><span class="p">:</span><span class="s2">"boohoo"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"Password"</span><span class="p">:</span><span class="s2">"password"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"agent_working_directory"</span><span class="p">:</span><span class="s2">"/Users/varshavs/gocd/agent/pipelines/build"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The request body will contain the following JSON elements:</p>

<p class='attributes-table-follows'></p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">fetch_artifact_configuration</code></td>
<td><code class="prettyprint">Object</code></td>
<td>This mainly contains the configuration properties that inform the plugin about the specific artifact that needs to be fetched.</td>
</tr>
<tr>
<td><code class="prettyprint">artifact_metadata</code></td>
<td><code class="prettyprint">Object</code></td>
<td>This is the information that was uploaded as a json file to the GoCD server at publish time. The json file is parsed and its contents are passed to the plugin at fetch time so that the plugin can fetch the right artifact.</td>
</tr>
<tr>
<td><code class="prettyprint">store_configuration</code></td>
<td><code class="prettyprint">Object</code></td>
<td>This section contains the details about the artifact store from which the plugin has to fetch the artifact.</td>
</tr>
<tr>
<td><code class="prettyprint">agent_working_directory</code></td>
<td><code class="prettyprint">String</code></td>
<td>Since the artifact download happens on the go-agent side, the working directory is also passed along in the request in case the plugin wants to use it.</td>
</tr>
</tbody></table>

<p class='response-code-heading'>Response code</p>

<p>The plugin is expected to return status <code class="prettyprint">200</code> if it can understand the request.</p>

<p class='response-body-heading'>Response Body</p>

<p>Can be left blank, the server does not parse any response body returned.</p>

<h2 id="get-plugin-icon">Get Plugin Icon</h2>

<p>This call is expected to return the icon for the plugin, so as to make it easy for users to identify the plugin.</p>

<p class='request-name-heading'>Request name</p>

<p><code class="prettyprint">cd.go.artifact.get-icon</code></p>

<p class='request-body-heading'>Request body</p>

<p>The server will not provide a request body.</p>

<p class='response-code-heading'>Response code</p>

<p>The plugin is expected to return status <code class="prettyprint">200</code> if it can understand the request.</p>

<p class='response-body-heading'>Response Body</p>

<blockquote>
<p>An example plugin response body:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"content_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/svg+xml"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHN2ZyB2ZXJzaW9u..."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The plugin is expected to return an <a href="#the-image-object">image object</a>.</p>

<aside class="notice">
  <strong>It is recommended that:</strong>
  <ul>
    <li>The image be an SVG image, since it scales well. Using other types like PNG/JPEG/GIF/BMP will work too, but is not recommended.</li>
    <li>The image be a square image.</li>
    <li>The base-64 encoded data is &lt;= 100KB. Bigger sizes will work too, but may take a long time to render.</li>
  </ul>
</aside>

<h2 id="get-store-config-metadata">Get Store Config Metadata</h2>

<p>This is a message that the plugin should implement, to allow users to configure global artifact stores from the Artifact Stores View in GoCD.</p>

<p class='request-name-heading'>Request name</p>

<p><code class="prettyprint">cd.go.artifact.store.get-metadata</code></p>

<p class='request-body-heading'>Request body</p>

<p>The server will not provide a request body.</p>

<p class='response-code-heading'>Response code</p>

<p>The plugin is expected to return status <code class="prettyprint">200</code> if it can understand the request.</p>

<p class='response-body-heading'>Response Body</p>

<blockquote>
<p>An example response body for a docker plugin</p>
</blockquote>

<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RegistryURL"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"secure"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"secure"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>A JSON <a href="#the-metadata-object">metadata object</a>.</p>

<h2 id="get-store-config-view">Get Store Config View</h2>

<p>This is a message that the plugin should implement, to allow users to configure artifact stores from the Artifact Stores View in GoCD.</p>

<p class='request-name-heading'>Request name</p>

<p><code class="prettyprint">cd.go.artifact.store.get-view</code></p>

<p class='request-body-heading'>Request body</p>

<p>The server will not provide a request body.</p>

<p class='response-code-heading'>Response code</p>

<p>The plugin is expected to return status <code class="prettyprint">200</code> if it can understand the request.</p>

<p class='response-body-heading'>Response Body</p>

<p>A JSON <a href="#the-get-settings-view-object">settings view object</a></p>

<blockquote>
<p>An example response body:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;div&gt;some html&lt;/div&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="validate-store-config">Validate Store Config</h2>

<p>This call is expected to validate the user inputs that form a part of the artifact store.</p>

<p class='request-name-heading'>Request name</p>

<p><code class="prettyprint">cd.go.artifact.store.validate</code></p>

<p class='request-body-heading'>Request body</p>

<p>The request body will contain a JSON object with the keys and values that form part of the profile.</p>

<blockquote>
<p>An example validation request body for the docker elastic agent plugin</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"RegistryURL"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://index.docker.io/v1/"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"Username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boohoo"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p class='response-code-heading'>Response code</p>

<p>The plugin is expected to return status <code class="prettyprint">200</code> if it can understand the request.</p>

<p class='response-body-heading'>Response Body</p>

<blockquote>
<p>The plugin should respond with JSON array response for each configuration key that has a validation error</p>
</blockquote>

<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RegistryURL"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"'RegistryURL is invalid'"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>If any of the input keys have a validation error on them, the plugin is expected to return a list of <a href="#the-validation-error-object">validation error objects</a>. If the profile is valid, the plugin should return an empty JSON array.</p>

<h2 id="get-publish-artifact-metadata">Get Publish Artifact Metadata</h2>

<p>This is a message that the plugin should implement, to allow users to configure external artifacts from the Job Config View in GoCD.</p>

<p class='request-name-heading'>Request name</p>

<p><code class="prettyprint">cd.go.artifact.publish.get-metadata</code></p>

<p class='request-body-heading'>Request body</p>

<p>The server will not provide a request body.</p>

<p class='response-code-heading'>Response code</p>

<p>The plugin is expected to return status <code class="prettyprint">200</code> if it can understand the request.</p>

<p class='response-body-heading'>Response Body</p>

<blockquote>
<p>An example response body for a docker registry plugin</p>
</blockquote>

<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Image"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"secure"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tag"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"secure"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>A JSON <a href="#the-metadata-object">metadata object</a>.</p>

<h2 id="get-publish-artifact-view">Get Publish Artifact View</h2>

<p>This is a message that the plugin should implement, to allow users to configure external artifacts from the Job Config View in GoCD.</p>

<p class='request-name-heading'>Request name</p>

<p><code class="prettyprint">cd.go.artifact.publish.get-view</code></p>

<p class='request-body-heading'>Request body</p>

<p>The server will not provide a request body.</p>

<p class='response-code-heading'>Response code</p>

<p>The plugin is expected to return status <code class="prettyprint">200</code> if it can understand the request.</p>

<p class='response-body-heading'>Response Body</p>

<p>A JSON <a href="#the-get-settings-view-object">settings view object</a></p>

<blockquote>
<p>An example response body:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;div&gt;some html&lt;/div&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="validate-publish-artifact-config">Validate Publish Artifact Config</h2>

<p>This call is expected to validate the user inputs that form a part of the publish external artifact config.</p>

<p class='request-name-heading'>Request name</p>

<p><code class="prettyprint">cd.go.artifact.publish.validate</code></p>

<p class='request-body-heading'>Request body</p>

<p>The request body will contain a JSON object with the keys and values that form part of the profile.</p>

<blockquote>
<p>An example validation request body for the docker elastic agent plugin</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"Image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gocd/gocd-demo"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"Tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boohoo"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"BuildFile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo.json"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p class='response-code-heading'>Response code</p>

<p>The plugin is expected to return status <code class="prettyprint">200</code> if it can understand the request.</p>

<p class='response-body-heading'>Response Body</p>

<blockquote>
<p>The plugin should respond with JSON array response for each configuration key that has a validation error</p>
</blockquote>

<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Image"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Either `BuildFile` or `Image` must be specified"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BuildFile"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Either `BuildFile` or `Image` must be specified"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>If any of the input keys have a validation error on them, the plugin is expected to return a list of <a href="#the-validation-error-object">validation error objects</a>. If the profile is valid, the plugin should return an empty JSON array.</p>

<aside class='notice'>
  There are some cases wherein the GoCD server cannot make the request to validate the plugin configuration when configured from the UI. This usually happens when the plugin id cannot be determined from the publish or fetch config.
  The request to validate the plugin properties happens only from the UI and the API. It does not happen when the cruise-config.xml is directly edited.
  Given the above cases, is recommended to perform the plugin validation right before the publish or fetch operation as well.
</aside>

<h2 id="get-fetch-artifact-metadata">Get Fetch Artifact Metadata</h2>

<p>This is a message that the plugin should implement, to allow users to configure fetch artifact task from the Task View in GoCD.</p>

<p class='request-name-heading'>Request name</p>

<p><code class="prettyprint">cd.go.artifact.fetch.get-metadata</code></p>

<p class='request-body-heading'>Request body</p>

<p>The server will not provide a request body.</p>

<p class='response-code-heading'>Response code</p>

<p>The plugin is expected to return status <code class="prettyprint">200</code> if it can understand the request.</p>

<p class='response-body-heading'>Response Body</p>

<blockquote>
<p>An example response body:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DestOnAgent"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"secure"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>A JSON <a href="#the-metadata-object">metadata object</a>.</p>

<h2 id="get-fetch-artifact-view">Get Fetch Artifact View</h2>

<p>This is a message that the plugin should implement, to allow users to configure fetch artifact task from the Task View in GoCD.</p>

<p class='request-name-heading'>Request name</p>

<p><code class="prettyprint">cd.go.artifact.fetch.get-view</code></p>

<p class='request-body-heading'>Request body</p>

<p>The server will not provide a request body.</p>

<p class='response-code-heading'>Response code</p>

<p>The plugin is expected to return status <code class="prettyprint">200</code> if it can understand the request.</p>

<p class='response-body-heading'>Response Body</p>

<p>A JSON <a href="#the-get-settings-view-object">settings view object</a></p>

<blockquote>
<p>An example response body:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;div&gt;some html&lt;/div&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="validate-fetch-artifact-config">Validate Fetch Artifact Config</h2>

<p>This call is expected to validate the user inputs that form a part of the fetch external artifact config.</p>

<p class='request-name-heading'>Request name</p>

<p><code class="prettyprint">cd.go.artifact.publish.validate</code></p>

<p class='request-body-heading'>Request body</p>

<p>The request body will contain a JSON object with the keys and values that form part of the profile.</p>

<blockquote>
<p>An example validation request body for the docker elastic agent plugin</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"Dest"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p class='response-code-heading'>Response code</p>

<p>The plugin is expected to return status <code class="prettyprint">200</code> if it can understand the request.</p>

<p class='response-body-heading'>Response Body</p>

<blockquote>
<p>The plugin should respond with JSON array response for each configuration key that has a validation error</p>
</blockquote>

<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dest"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>If any of the input keys have a validation error on them, the plugin is expected to return a list of <a href="#the-validation-error-object">validation error objects</a>. If the profile is valid, the plugin should return an empty JSON array.</p>

<aside class='notice'>
  There are some cases wherein the GoCD server cannot make the request to validate the plugin configuration when configured from the UI. This usually happens when the plugin id cannot be determined from the publish or fetch config.
  The request to validate the plugin properties happens only from the UI and the API. It does not happen when the cruise-config.xml is directly edited.
  Given the above cases, is recommended to perform the plugin validation right before the publish or fetch operation as well.
</aside>

<h1 id="requests-to-the-gocd-server">Requests to the GoCD server</h1>

<p>The plugin may make the following requests to the server using <code class="prettyprint">GoApplicationAccessor#submit(GoApiRequest)</code></p>

<ul>
<li><a href="#send-console-log">Send Console Log</a></li>
</ul>

<h1 id="request-response-json-objects">Request/Response JSON Objects</h1>

<p><a id='the-get-settings-view-object'></a></p>

<h3 id="the-settings-view-object">The Settings View Object</h3>

<blockquote>
<p>Here&rsquo;s an example of the settings view object:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;div class=\"form_item_block\"&gt;...&lt;/div&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p class='attributes-table-follows'></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">template</code></td>
<td>String</td>
<td>A string containing an HTML AngularJS based view.</td>
</tr>
</tbody></table>

<p>This template is an <a href="https://angularjs.org">AngularJS</a> based template.</p>

<p>GoCD uses Angular JS as its template engine for the plugin UI. This allows plugin authors to use a limited set of AngularJS features to specify how the UI of their plugins looks.</p>

<aside class='notice'>
  <strong>Note:</strong> Some plugin endpoints, like the Package Repository plugin, do not use this for their view.
</aside>

<div style='clear: both;'></div>

<h4 id="getting-started-with-angularjs-based-templates">Getting started with AngularJS based templates</h4>

<blockquote>
<p>Given a configuration:</p>
</blockquote>

<pre class="highlight xml"><code><span class="nt">&lt;configuration&gt;</span>
  <span class="nt">&lt;property&gt;</span>
    <span class="nt">&lt;key&gt;</span>username<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;value&gt;</span>alice<span class="nt">&lt;/username&gt;</span>
  <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre>

<blockquote>
<p>This gets converted into the following JSON representation in the browser:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>The AngularJS template is expected to bind to the JSON object shown above:</p>
</blockquote>

<pre class="highlight html"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form_item_block"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;label&gt;</span>Username:<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">'asterix'</span><span class="nt">&gt;</span>*<span class="nt">&lt;/span&gt;&lt;/label&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">ng-model=</span><span class="s">"username"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<p>When an Angular template is used in a Go plugin, to define the configuration UI, the configuration key which is stored in the configuration XML is used everywhere and is expected to be consistent. Since Angular works off of JSON, GoCD will make sure that the key in the JSON provided to the Angular template is the same as the key in the configuration XML.</p>

<p>Suppose the key of the configuration property stored in the XML is &ldquo;username&rdquo;, with value, &ldquo;alice&rdquo;, then Go will make sure that the value is available to the template as &ldquo;username&rdquo; when used in an Angular-specific HTML attribute like &ldquo;ng-model&rdquo;.</p>

<div style='clear: both;'></div>

<h4 id="showing-validation-errors-in-the-ui">Showing validation errors in the UI</h4>

<blockquote>
<p>We use some simple string replacement<br/>
to substitute <code class="prettyprint">GOINPUTNAME</code> with a unique identifier<br/>
for your plugin in order to render<br/>
any server side errors</p>
</blockquote>

<pre class="highlight html"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form_item_block"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;label&gt;</span>Username:<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">'asterix'</span><span class="nt">&gt;</span>*<span class="nt">&lt;/span&gt;&lt;/label&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">ng-model=</span><span class="s">"username"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"form_error"</span> <span class="na">ng-show=</span><span class="s">"GOINPUTNAME[username].$error.server"</span><span class="nt">&gt;</span>
    {{ GOINPUTNAME[username].$error.server}}
  <span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<p>In case of validation errors returned by <code class="prettyprint">go.plugin-settings.validate-configuration</code>, the error messages needs to be populated on the UI, use the snippet here to show the validation errors.</p>

<p><a id='the-plugin-settings-configuration-object'></a></p>

<h3 id="the-plugin-settings-configuration-object">The Plugin Settings Configuration Object</h3>

<blockquote>
<p>Here&rsquo;s an example of the plugin settings configuration object:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"server_url"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"display-name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Server URL"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display-order"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display-name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Username"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display-order"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"password"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"secure"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display-name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"display-order"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p class='attributes-table-follows'></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">display-name</code></td>
<td>String</td>
<td>The name of the property.</td>
</tr>
<tr>
<td><code class="prettyprint">default-value</code></td>
<td>String</td>
<td>The default value of the property.</td>
</tr>
<tr>
<td><code class="prettyprint">display-order</code></td>
<td>String</td>
<td>A string containing a numerical value.</td>
</tr>
<tr>
<td><code class="prettyprint">required</code></td>
<td>Boolean</td>
<td>If the field is mandatory.</td>
</tr>
<tr>
<td><code class="prettyprint">secure</code></td>
<td>Boolean</td>
<td>If the data in the field should be stored encrypted.</td>
</tr>
</tbody></table>

<p><a id='the-plugin-settings-configuration-object'></a></p>

<h3 id="the-validation-error-object">The Validation Error Object</h3>

<blockquote>
<p>Here&rsquo;s an example of the validation error object:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email_address"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email address is invalid"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Password must be provided"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p class='attributes-table-follows'></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">key</code></td>
<td>String</td>
<td>The name of configuration key that has an error.</td>
</tr>
<tr>
<td><code class="prettyprint">message</code></td>
<td>String</td>
<td>The error message associated with that key.</td>
</tr>
</tbody></table>

<p><a id='the-image-object'></a></p>

<h3 id="the-image-object">The Image Object</h3>

<blockquote>
<p>Here&rsquo;s an example of the image object:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"content_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/svg+xml"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"...."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p class='attributes-table-follows'></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">content_type</code></td>
<td>String</td>
<td>A valid <a href="http://www.iana.org/assignments/media-types/media-types.xhtml#image">content type</a> for the image. Please make sure the content type is supported by most browsers.</td>
</tr>
<tr>
<td><code class="prettyprint">data</code></td>
<td>String</td>
<td>A <a href="https://en.wikipedia.org/wiki/Base64">base-64</a> encoded (single-line non-chunking) byte array of the byte-sequence that composes the image.</td>
</tr>
</tbody></table>

<p><a id='the-metadata-object'></a></p>

<h3 id="the-metadata-object">The Metadata Object</h3>

<blockquote>
<p>Here&rsquo;s an example of the metadata object:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"required"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"secure"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p class='attributes-table-follows'></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">key</code></td>
<td>String</td>
<td>The name of the configuration property supported by an elastic profile.</td>
</tr>
<tr>
<td><code class="prettyprint">metadata</code></td>
<td>Object</td>
<td>The metadata associated with the key used in the elastic profile. Valid keys are <code class="prettyprint">required</code> and <code class="prettyprint">secure</code>.</td>
</tr>
</tbody></table>

<p><a id='the-server-info-object'></a></p>

<h3 id="the-server-info-object">The server info object</h3>

<blockquote>
<p>Here&rsquo;s an example of the server info object:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"server_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"df0cb9be-2696-4689-8d46-1ef3c4e4447c"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"site_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com:8153/go"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"secure_site_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com:8154/go"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p class='attributes-table-follows'></p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">server_id</code></td>
<td>String</td>
<td>This contains a unique identifier for this server.</td>
</tr>
<tr>
<td><code class="prettyprint">site_url</code></td>
<td>String</td>
<td>This contains the site url configured for this server.</td>
</tr>
<tr>
<td><code class="prettyprint">secure_site_url</code></td>
<td>String</td>
<td>This contains the secure site url configured for this server.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
          </div>
      </div>
    </div>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48357651-2', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>
